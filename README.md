# Kafka-–≤–æ—Ä–∫–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è üöó‚ö°

> –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –ø–æ–ª–∏—Å–æ–≤ —Å –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ exactly-once –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã Kafka-–≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –∞–≤—Ç–æ—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **Exactly-once —Å–µ–º–∞–Ω—Ç–∏–∫—É** ‚Äî –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑
- üîÑ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** ‚Äî 3 –±—Ä–æ–∫–µ—Ä–∞ Kafka —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π RF=3
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî Prometheus + Grafana —Å –∞–ª–µ—Ä—Ç–∞–º–∏
- üöÄ **–í—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî P95 latency < 170ms
- üîß **–ü—Ä–æ—Å—Ç–æ—Ç—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** ‚Äî Docker Compose + Makefile

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Gateway   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    Kafka    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Consumers   ‚îÇ
‚îÇ  (HTTP API) ‚îÇ    ‚îÇ  Cluster    ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ    ‚îÇ 3 brokers   ‚îÇ    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ Port: 8080  ‚îÇ    ‚îÇ RF = 3      ‚îÇ    ‚îÇ ‚îÇUnderwr. ‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ ‚îÇBilling  ‚îÇ ‚îÇ
                                      ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ PostgreSQL  ‚îÇ
                   ‚îÇ (Exactly-   ‚îÇ
                   ‚îÇ  once DB)   ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üèóÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üåê Gateway Service
- **REST API** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∏ –æ—Ç–º–µ–Ω—ã –ø–æ–ª–∏—Å–æ–≤
- **Producer** —Å exactly-once –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏
- **–ú–µ—Ç—Ä–∏–∫–∏** –∏ health checks

### üßÆ Underwriting Service  
- **–†–∞—Å—á—ë—Ç —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –ø—Ä–µ–º–∏–π** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞
- **–ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–∞** (–≤–æ–∑—Ä–∞—Å—Ç, —Å—Ç–∞–∂, —Ç–∏–ø –∞–≤—Ç–æ, —Ä–µ–≥–∏–æ–Ω, –î–¢–ü)
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–æ–≤**

### üí∞ Billing Service
- **–°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤** –Ω–∞ –æ–ø–ª–∞—Ç—É –ø—Ä–µ–º–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤** –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –ø–æ–ª–∏—Å–æ–≤
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø–ª–∞—Ç–µ–∂–∞—Ö

### üìä Monitoring Stack
- **Prometheus** ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- **Grafana** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **Alert Manager** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Go 1.22+**
- **Docker & Docker Compose**
- **Make** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <repository-url>
cd sbs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make deps
```

### 2. –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Å–µ—Ä–≤–∏—Å—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
make demo
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- üê≥ –ó–∞–ø—É—Å—Ç–∏—Ç Kafka –∫–ª–∞—Å—Ç–µ—Ä (3 –±—Ä–æ–∫–µ—Ä–∞)
- üóÑÔ∏è –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL
- üìä –ó–∞–ø—É—Å—Ç–∏—Ç Prometheus + Grafana
- üîß –°–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–ø–∏–∫–∏
- üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ Go —Å–µ—Ä–≤–∏—Å—ã

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª–∏—Å–∞
curl -X POST http://localhost:8080/api/v1/policies \
     -H 'Content-Type: application/json' \
     -d '{
       "client_id": "test-client-123",
       "policy_type": "auto",
       "driver_age": 30,
       "driving_experience": 10,
       "car_type": "sedan",
       "region": "moscow",
       "accidents_count": 0
     }'

# –û—Ç–≤–µ—Ç:
# {
#   "policy_id": "550e8400-e29b-41d4-a716-446655440001",
#   "event_id": "550e8400-e29b-41d4-a716-446655440002", 
#   "status": "created"
# }
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| **Gateway API** | http://localhost:8080 | REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª–∏—Å–∞–º–∏ |
| **Kafka UI** | http://localhost:8080 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ |
| **Grafana** | http://localhost:3000 | –î–∞—à–±–æ—Ä–¥—ã –∏ –º–µ—Ç—Ä–∏–∫–∏ (admin/admin) |
| **Prometheus** | http://localhost:9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –∞–ª–µ—Ä—Ç—ã |

## üìñ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ—à–∞–≥–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# 1. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
make docker-up

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤
make kafka-topics

# 3. –°–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
make build

# 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö)
make run-gateway      # –¢–µ—Ä–º–∏–Ω–∞–ª 1
make run-underwriting # –¢–µ—Ä–º–∏–Ω–∞–ª 2  
make run-billing      # –¢–µ—Ä–º–∏–Ω–∞–ª 3
```

### API Endpoints

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Å–∞
```bash
POST /api/v1/policies
Content-Type: application/json

{
  "client_id": "uuid",
  "policy_type": "auto",
  "driver_age": 30,
  "driving_experience": 10,
  "car_type": "sedan|suv|sports|electric",
  "region": "moscow|spb|other",
  "accidents_count": 0
}
```

#### –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Å–∞
```bash
POST /api/v1/policies/{id}/renew
Content-Type: application/json

{
  "driver_age": 31,
  "accidents_count": 1
}
```

#### –û—Ç–º–µ–Ω–∞ –ø–æ–ª–∏—Å–∞
```bash
POST /api/v1/policies/{id}/cancel
```



## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=insurance
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password

# Kafka
KAFKA_BROKERS=localhost:9092,localhost:9093,localhost:9094
KAFKA_TOPIC=auto.events
KAFKA_DLQ_TOPIC=auto.events.dlq

# –°–µ—Ä–≤–∏—Å—ã
GATEWAY_PORT=8080
UNDERWRITING_GROUP_ID=underwriting-service
BILLING_GROUP_ID=billing-service
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–ª–µ—Ä—Ç |
|---------|----------|-------|
| `kafka_consumer_lag` | –û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞ | > 1000 |
| `kafka_processing_errors_total` | –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | > 0.1% |
| `kafka_message_processing_duration` | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | P95 > 5s |
| `kafka_dlq_messages_total` | –°–æ–æ–±—â–µ–Ω–∏—è –≤ DLQ | > 0.1/s |

### Grafana –¥–∞—à–±–æ—Ä–¥—ã

1. **Kafka Overview** ‚Äî –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
2. **Consumer Performance** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤  
3. **Business Metrics** ‚Äî –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (–ø–æ–ª–∏—Å—ã, –ø—Ä–µ–º–∏–∏)
4. **System Health** ‚Äî –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã

## üè≠ Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ **Exactly-once —Å–µ–º–∞–Ω—Ç–∏–∫–∞** —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- ‚úÖ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** —Å 3 –±—Ä–æ–∫–µ—Ä–∞–º–∏
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å –∞–ª–µ—Ä—Ç–∞–º–∏
- ‚úÖ **Graceful shutdown** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ **Dead Letter Queue** –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ **Structured logging** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ **Health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤


### Kubernetes deployment

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ (TODO)
make kubernetes-deploy
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **Throughput** | 10,000+ —Å–æ–±—ã—Ç–∏–π/–¥–µ–Ω—å |
| **P95 Latency** | 170ms |
| **SLA** | 99.98% |
| **Zero Loss** | ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ |
| **MTTR** | ‚Üì –≤ 2.3 —Ä–∞–∑–∞ |

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ consumer instances
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π —Ç–æ–ø–∏–∫–æ–≤
- **–ö–ª–∞—Å—Ç–µ—Ä**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Kafka –±—Ä–æ–∫–µ—Ä–æ–≤

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
sbs/
‚îú‚îÄ‚îÄ cmd/                    # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ gateway/           # HTTP Gateway
‚îÇ   ‚îú‚îÄ‚îÄ underwriting/      # Underwriting Consumer  
‚îÇ   ‚îî‚îÄ‚îÄ billing/           # Billing Consumer
‚îú‚îÄ‚îÄ pkg/                   # –û–±—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ kafka/            # Kafka framework
‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ gateway/          # Gateway handlers
‚îÇ   ‚îú‚îÄ‚îÄ underwriting/     # Premium calculation
‚îÇ   ‚îî‚îÄ‚îÄ billing/          # Billing logic
‚îú‚îÄ‚îÄ monitoring/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ scripts/             # SQL —Å–∫—Ä–∏–ø—Ç—ã

‚îú‚îÄ‚îÄ docker-compose.yml  # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îî‚îÄ‚îÄ Makefile           # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ consumer'–∞

1. –°–æ–∑–¥–∞–π—Ç–µ handler —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º `kafka.MessageHandler`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `Handle()` –∏ `GetTopic()`
3. –°–æ–∑–¥–∞–π—Ç–µ main.go –≤ `cmd/your-service/`
4. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ Prometheus

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make dev-setup          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev-reset          # –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å—Ä–µ–¥—ã

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  
make status             # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs               # –õ–æ–≥–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

# –û—á–∏—Å—Ç–∫–∞
make clean              # –£–¥–∞–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
make docker-down        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make stop-demo          # –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make format             # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Go –∫–æ–¥–∞
```

## üêõ Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make docker-down && make docker-up
```

**Consumer lag —Ä–∞—Å—Ç—ë—Ç**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Kafka UI
open http://localhost:8080

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ consumer'–æ–≤
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã
```

**–û—à–∏–±–∫–∏ –≤ DLQ**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –≤ DLQ —á–µ—Ä–µ–∑ Kafka UI
# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
make logs
```

## ü§ù Contributing

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MIT –ª–∏—Ü–µ–Ω–∑–∏—é. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. üìñ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](#-–ø–æ–¥—Ä–æ–±–Ω–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
2. üêõ –°–æ–∑–¥–∞–π—Ç–µ [issue](https://github.com/your-repo/issues)
3. üí¨ –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ Kafka –∏ Go** 